{"ast":null,"code":"var _jsxFileName = \"D:\\\\CNWEB\\\\QLNH\\\\HALD_app\\\\src\\\\Cart\\\\Cart.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, Redirect } from 'react-router-dom';\nimport { deleteCart, updateCart } from '../Redux/Action/ActionCart';\nimport { changeCount } from '../Redux/Action/ActionCount';\nimport CartAPI from '../API/CartAPI';\nimport queryString from 'query-string';\nimport CartsLocal from '../Share/CartsLocal';\nimport CouponAPI from '../API/CouponAPI';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nCart.propTypes = {};\n\nfunction Cart(props) {\n  _s();\n\n  const dispatch = useDispatch();\n  const [list_carts, set_list_carts] = useState([]); // state get from redux\n\n  const count_change = useSelector(state => state.Count.isLoad);\n  const [total_price, set_total_price] = useState(0); // Hàm này dùng để hiện thị danh sách sản phẩm đã thêm vào giỏ hàng\n  // và tính tổng tiền\n\n  useEffect(() => {\n    set_list_carts(JSON.parse(localStorage.getItem('carts')));\n    Sum_Price(JSON.parse(localStorage.getItem('carts')), 0);\n  }, [count_change]); // Hàm này dùng để tính tổng tiền\n\n  function Sum_Price(carts, sum_price) {\n    carts.map(value => {\n      return sum_price += parseInt(value.count) * parseInt(value.price_product);\n    });\n    set_total_price(sum_price);\n    set_new_price(sum_price);\n  } // Hàm này dùng để tăng số lượng\n\n\n  const upCount = (count, id_cart) => {\n    const data = {\n      id_cart: id_cart,\n      count: parseInt(count) + 1\n    };\n    console.log(data);\n    CartsLocal.updateProduct(data);\n    const action_change_count = changeCount(count_change);\n    dispatch(action_change_count);\n  }; // Hàm này dùng để giảm số lượng\n\n\n  const downCount = (count, id_cart) => {\n    if (parseInt(count) === 1) {\n      return;\n    }\n\n    const data = {\n      id_cart: id_cart,\n      count: parseInt(count) - 1\n    };\n    console.log(data);\n    CartsLocal.updateProduct(data);\n    const action_change_count = changeCount(count_change);\n    dispatch(action_change_count);\n  }; // Hàm này dùng để xóa giỏ hàng\n\n\n  const handler_delete_carts = id_cart => {\n    CartsLocal.deleteProduct(id_cart); // Thay đổi trạng thái trong redux để load lại cart ở phần header\n\n    const action_change_count = changeCount(count_change);\n    dispatch(action_change_count);\n  }; // Hàm này này dùng để kiểm tra đăng nhập checkout\n\n\n  const [show_error, set_show_error] = useState(false);\n  const [show_null_cart, set_show_null_cart] = useState(false);\n\n  const handler_checkout = () => {\n    if (sessionStorage.getItem('id_user')) {\n      if (list_carts.length < 1) {\n        set_show_null_cart(true);\n      } else {\n        window.location.replace('/checkout');\n      }\n    } else {\n      set_show_error(true);\n    }\n\n    setTimeout(() => {\n      set_show_error(false);\n      set_show_null_cart(false);\n    }, 1500);\n  }; // Hàm này dùng để kiểm tra coupon\n\n\n  const [coupon, set_coupon] = useState('');\n  const [discount, setDiscount] = useState(0);\n  const [new_price, set_new_price] = useState(0);\n  const [show_success, set_show_success] = useState(false);\n  const [errorCode, setErrorCode] = useState(false);\n\n  const handlerCoupon = async e => {\n    e.preventDefault();\n\n    if (!sessionStorage.getItem('id_user')) {\n      set_show_error(true);\n    } else {\n      const params = {\n        id_user: sessionStorage.getItem('id_user'),\n        code: coupon\n      };\n      const query = '?' + queryString.stringify(params);\n      const response = await CouponAPI.checkCoupon(query);\n\n      if (response.msg === 'Không tìm thấy') {\n        setErrorCode(true);\n      } else if (response.msg === 'Bạn đã sử dụng mã này rồi') {\n        setErrorCode(true);\n      } else {\n        localStorage.setItem('id_coupon', response.coupon._id);\n        localStorage.setItem('coupon', JSON.stringify(response.coupon));\n        setDiscount(total_price * response.coupon.promotion / 100);\n        const newTotal = total_price - total_price * response.coupon.promotion / 100;\n        set_new_price(newTotal);\n        set_show_success(true);\n      }\n    }\n\n    setTimeout(() => {\n      set_show_error(false);\n      set_show_null_cart(false);\n      set_show_success(false);\n      setErrorCode(false);\n    }, 1500);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [errorCode && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal_success\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"group_model_success pt-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center p-2\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-bell fix_icon_bell\",\n            style: {\n              fontSize: '40px',\n              color: '#fff',\n              backgroundColor: '#f84545'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-center p-3\",\n          style: {\n            color: '#fff'\n          },\n          children: \"Vui L\\xF2ng Ki\\u1EC3m Tra L\\u1EA1i M\\xE3 Code!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 17\n    }, this), show_success && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal_success\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"group_model_success pt-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center p-2\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-bell fix_icon_bell\",\n            style: {\n              fontSize: '40px',\n              color: '#fff'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-center p-3\",\n          style: {\n            color: '#fff'\n          },\n          children: \"\\xC1p D\\u1EE5ng M\\xE3 Code Th\\xE0nh C\\xF4ng!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 17\n    }, this), show_error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal_success\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"group_model_success pt-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center p-2\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-bell fix_icon_bell\",\n            style: {\n              fontSize: '40px',\n              color: '#fff',\n              backgroundColor: '#f84545'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-center p-3\",\n          style: {\n            color: '#fff'\n          },\n          children: \"Vui L\\xF2ng Ki\\u1EC3m Tra T\\xECnh Tr\\u1EA1ng \\u0110\\u0103ng Nh\\u1EADp!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 17\n    }, this), show_null_cart && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal_success\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"group_model_success pt-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center p-2\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-bell fix_icon_bell\",\n            style: {\n              fontSize: '40px',\n              color: '#fff',\n              backgroundColor: '#f84545'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-center p-3\",\n          style: {\n            color: '#fff'\n          },\n          children: \"Vui L\\xF2ng Ki\\u1EC3m Tra L\\u1EA1i Gi\\u1ECF H\\xE0ng!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"breadcrumb-area\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"breadcrumb-content\",\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/\",\n                children: \"Home\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"active\",\n              children: \"Shopping Cart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Shopping-cart-area pt-60 pb-60\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              action: \"#\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"table-content table-responsive\",\n                children: /*#__PURE__*/_jsxDEV(\"table\", {\n                  className: \"table\",\n                  children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                    children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                        className: \"li-product-remove\",\n                        children: \"remove\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 249,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        className: \"li-product-thumbnail\",\n                        children: \"images\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 250,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        className: \"cart-product-name\",\n                        children: \"Product\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 251,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        className: \"li-product-price\",\n                        children: \"Price\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 252,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        className: \"li-product-price\",\n                        children: \"Size\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 253,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        className: \"li-product-quantity\",\n                        children: \"Quantity\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 254,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        className: \"li-product-subtotal\",\n                        children: \"Total\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 255,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 248,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 247,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                    children: list_carts && list_carts.map((value, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"li-product-remove\",\n                        onClick: () => handler_delete_carts(value.id_cart),\n                        children: /*#__PURE__*/_jsxDEV(\"a\", {\n                          style: {\n                            cursor: 'pointer'\n                          },\n                          children: /*#__PURE__*/_jsxDEV(\"i\", {\n                            className: \"fa fa-times\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 263,\n                            columnNumber: 94\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 263,\n                          columnNumber: 61\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 262,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"li-product-thumbnail\",\n                        children: /*#__PURE__*/_jsxDEV(Link, {\n                          to: `/detail/${value.id_product}`,\n                          children: /*#__PURE__*/_jsxDEV(\"img\", {\n                            src: value.image,\n                            style: {\n                              width: '5rem'\n                            },\n                            alt: \"Li's Product Image\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 265,\n                            columnNumber: 135\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 265,\n                          columnNumber: 94\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 265,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"li-product-name\",\n                        children: /*#__PURE__*/_jsxDEV(\"a\", {\n                          href: \"#\",\n                          children: value.name_product\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 266,\n                          columnNumber: 89\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 266,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"li-product-price\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"amount\",\n                          children: new Intl.NumberFormat('vi-VN', {\n                            style: 'decimal',\n                            decimal: 'VND'\n                          }).format(value.price_product) + ' VNĐ'\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 267,\n                          columnNumber: 90\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 267,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"li-product-price\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"amount\",\n                          children: value.size\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 268,\n                          columnNumber: 90\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 268,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"quantity\",\n                        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                          children: \"Quantity\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 270,\n                          columnNumber: 61\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"cart-plus-minus\",\n                          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                            className: \"cart-plus-minus-box\",\n                            value: value.count,\n                            type: \"text\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 272,\n                            columnNumber: 65\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"dec qtybutton\",\n                            onClick: () => downCount(value.count, value.id_cart),\n                            children: /*#__PURE__*/_jsxDEV(\"i\", {\n                              className: \"fa fa-angle-down\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 273,\n                              columnNumber: 150\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 273,\n                            columnNumber: 65\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"inc qtybutton\",\n                            onClick: () => upCount(value.count, value.id_cart),\n                            children: /*#__PURE__*/_jsxDEV(\"i\", {\n                              className: \"fa fa-angle-up\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 274,\n                              columnNumber: 148\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 274,\n                            columnNumber: 65\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 271,\n                          columnNumber: 61\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 269,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"product-subtotal\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"amount\",\n                          children: new Intl.NumberFormat('vi-VN', {\n                            style: 'decimal',\n                            decimal: 'VND'\n                          }).format(parseInt(value.price_product) * parseInt(value.count)) + ' VNĐ'\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 277,\n                          columnNumber: 90\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 277,\n                        columnNumber: 57\n                      }, this)]\n                    }, index, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 261,\n                      columnNumber: 53\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 258,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 246,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"row\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"col-12\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"coupon-all\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      class: \"coupon\",\n                      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                        id: \"coupon_code\",\n                        class: \"input-text\",\n                        onChange: e => set_coupon(e.target.value),\n                        value: coupon,\n                        placeholder: \"Coupon code\",\n                        type: \"text\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 288,\n                        columnNumber: 49\n                      }, this), \" \\xA0\", /*#__PURE__*/_jsxDEV(\"input\", {\n                        class: \"button\",\n                        value: \"Apply coupon\",\n                        type: \"submit\",\n                        onClick: handlerCoupon\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 289,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 287,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 286,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-md-5 ml-auto\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"cart-page-total\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                      children: \"Cart totals\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 297,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                        children: [\"Sub Total \", /*#__PURE__*/_jsxDEV(\"span\", {\n                          children: new Intl.NumberFormat('vi-VN', {\n                            style: 'decimal',\n                            decimal: 'VND'\n                          }).format(total_price) + ' VNĐ'\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 299,\n                          columnNumber: 63\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 299,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                        children: [\"Discount \", /*#__PURE__*/_jsxDEV(\"span\", {\n                          children: new Intl.NumberFormat('vi-VN', {\n                            style: 'decimal',\n                            decimal: 'VND'\n                          }).format(discount) + ' VNĐ'\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 300,\n                          columnNumber: 62\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 300,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                        children: [\"Total \", /*#__PURE__*/_jsxDEV(\"span\", {\n                          children: new Intl.NumberFormat('vi-VN', {\n                            style: 'decimal',\n                            decimal: 'VND'\n                          }).format(new_price) + ' VNĐ'\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 301,\n                          columnNumber: 59\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 301,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 298,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                      style: {\n                        color: '#fff',\n                        cursor: 'pointer',\n                        fontWeight: '600'\n                      },\n                      onClick: handler_checkout,\n                      children: \"Proceed to checkout\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 303,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 296,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 295,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 183,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Cart, \"vZ32X75UBeK5ofqOy0/JLHAJ+mc=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = Cart;\nexport default Cart;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"sources":["D:/CNWEB/QLNH/HALD_app/src/Cart/Cart.jsx"],"names":["React","useEffect","useState","PropTypes","useDispatch","useSelector","Link","Redirect","deleteCart","updateCart","changeCount","CartAPI","queryString","CartsLocal","CouponAPI","Cart","propTypes","props","dispatch","list_carts","set_list_carts","count_change","state","Count","isLoad","total_price","set_total_price","JSON","parse","localStorage","getItem","Sum_Price","carts","sum_price","map","value","parseInt","count","price_product","set_new_price","upCount","id_cart","data","console","log","updateProduct","action_change_count","downCount","handler_delete_carts","deleteProduct","show_error","set_show_error","show_null_cart","set_show_null_cart","handler_checkout","sessionStorage","length","window","location","replace","setTimeout","coupon","set_coupon","discount","setDiscount","new_price","show_success","set_show_success","errorCode","setErrorCode","handlerCoupon","e","preventDefault","params","id_user","code","query","stringify","response","checkCoupon","msg","setItem","_id","promotion","newTotal","fontSize","color","backgroundColor","index","cursor","id_product","image","width","name_product","Intl","NumberFormat","style","decimal","format","size","target","fontWeight"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, Redirect } from 'react-router-dom';\nimport { deleteCart, updateCart } from '../Redux/Action/ActionCart';\nimport { changeCount } from '../Redux/Action/ActionCount';\nimport CartAPI from '../API/CartAPI'\nimport queryString from 'query-string'\nimport CartsLocal from '../Share/CartsLocal';\nimport CouponAPI from '../API/CouponAPI';\n\nCart.propTypes = {\n\n};\n\nfunction Cart(props) {\n\n    const dispatch = useDispatch()\n\n    const [list_carts, set_list_carts] = useState([])\n\n    // state get from redux\n    const count_change = useSelector(state => state.Count.isLoad)\n\n    const [total_price, set_total_price] = useState(0)\n\n    // Hàm này dùng để hiện thị danh sách sản phẩm đã thêm vào giỏ hàng\n    // và tính tổng tiền\n    useEffect(() => {\n\n        set_list_carts(JSON.parse(localStorage.getItem('carts')))\n\n        Sum_Price(JSON.parse(localStorage.getItem('carts')), 0)\n\n    }, [count_change])\n\n\n\n    // Hàm này dùng để tính tổng tiền\n    function Sum_Price(carts, sum_price) {\n        carts.map(value => {\n            return sum_price += parseInt(value.count) * parseInt(value.price_product)\n        })\n\n        set_total_price(sum_price)\n        set_new_price(sum_price)\n    }\n\n    // Hàm này dùng để tăng số lượng\n    const upCount = (count, id_cart) => {\n\n        const data = {\n            id_cart: id_cart,\n            count: parseInt(count) + 1\n        }\n\n        console.log(data)\n\n\n\n        CartsLocal.updateProduct(data)\n\n        const action_change_count = changeCount(count_change)\n        dispatch(action_change_count)\n\n    }\n\n    // Hàm này dùng để giảm số lượng\n    const downCount = (count, id_cart) => {\n\n        if (parseInt(count) === 1) {\n            return\n        }\n\n        const data = {\n            id_cart: id_cart,\n            count: parseInt(count) - 1\n        }\n\n        console.log(data)\n\n        CartsLocal.updateProduct(data)\n\n        const action_change_count = changeCount(count_change)\n        dispatch(action_change_count)\n\n    }\n\n    // Hàm này dùng để xóa giỏ hàng\n    const handler_delete_carts = (id_cart) => {\n\n        CartsLocal.deleteProduct(id_cart)\n\n        // Thay đổi trạng thái trong redux để load lại cart ở phần header\n        const action_change_count = changeCount(count_change)\n        dispatch(action_change_count)\n\n    }\n\n\n    // Hàm này này dùng để kiểm tra đăng nhập checkout\n    const [show_error, set_show_error] = useState(false)\n\n    const [show_null_cart, set_show_null_cart] = useState(false)\n\n    const handler_checkout = () => {\n\n        if (sessionStorage.getItem('id_user')) {\n            if (list_carts.length < 1) {\n                set_show_null_cart(true)\n            } else {\n                window.location.replace('/checkout')\n            }\n        } else {\n\n            set_show_error(true)\n\n        }\n\n        setTimeout(() => {\n            set_show_error(false)\n            set_show_null_cart(false)\n        }, 1500)\n\n    }\n\n\n    // Hàm này dùng để kiểm tra coupon\n    const [coupon, set_coupon] = useState('')\n\n    const [discount, setDiscount] = useState(0)\n\n    const [new_price, set_new_price] = useState(0)\n\n    const [show_success, set_show_success] = useState(false)\n\n    const [errorCode, setErrorCode] = useState(false)\n\n    const handlerCoupon = async (e) => {\n\n        e.preventDefault()\n        \n        if (!sessionStorage.getItem('id_user')){\n            set_show_error(true)\n        }else{\n\n            const params = {\n                id_user: sessionStorage.getItem('id_user'),\n                code: coupon\n            }\n\n            const query = '?' + queryString.stringify(params)\n\n            const response = await CouponAPI.checkCoupon(query)\n\n            if (response.msg === 'Không tìm thấy'){\n                setErrorCode(true)\n            }else if (response.msg === 'Bạn đã sử dụng mã này rồi'){\n                setErrorCode(true)\n            }else{\n                localStorage.setItem('id_coupon', response.coupon._id)\n                localStorage.setItem('coupon', JSON.stringify(response.coupon))\n\n                setDiscount((total_price * response.coupon.promotion) / 100)\n\n                const newTotal = total_price - ((total_price * response.coupon.promotion) / 100)\n\n                set_new_price(newTotal)\n                set_show_success(true)\n            }\n\n        }\n\n        setTimeout(() => {\n            set_show_error(false)\n            set_show_null_cart(false)\n            set_show_success(false)\n            setErrorCode(false)\n        }, 1500)\n    }\n\n    return (\n        <div>\n            {\n                errorCode &&\n                <div className=\"modal_success\">\n                    <div className=\"group_model_success pt-3\">\n                        <div className=\"text-center p-2\">\n                            <i className=\"fa fa-bell fix_icon_bell\" style={{ fontSize: '40px', color: '#fff', backgroundColor: '#f84545' }}></i>\n                        </div>\n                        <h4 className=\"text-center p-3\" style={{ color: '#fff' }}>Vui Lòng Kiểm Tra Lại Mã Code!</h4>\n                    </div>\n                </div>\n            }\n            {\n                show_success &&\n                <div className=\"modal_success\">\n                    <div className=\"group_model_success pt-3\">\n                        <div className=\"text-center p-2\">\n                            <i className=\"fa fa-bell fix_icon_bell\" style={{ fontSize: '40px', color: '#fff' }}></i>\n                        </div>\n                        <h4 className=\"text-center p-3\" style={{ color: '#fff' }}>Áp Dụng Mã Code Thành Công!</h4>\n                    </div>\n                </div>\n            }\n            {\n                show_error &&\n                <div className=\"modal_success\">\n                    <div className=\"group_model_success pt-3\">\n                        <div className=\"text-center p-2\">\n                            <i className=\"fa fa-bell fix_icon_bell\" style={{ fontSize: '40px', color: '#fff', backgroundColor: '#f84545' }}></i>\n                        </div>\n                        <h4 className=\"text-center p-3\" style={{ color: '#fff' }}>Vui Lòng Kiểm Tra Tình Trạng Đăng Nhập!</h4>\n                    </div>\n                </div>\n            }\n            {\n                show_null_cart &&\n                <div className=\"modal_success\">\n                    <div className=\"group_model_success pt-3\">\n                        <div className=\"text-center p-2\">\n                            <i className=\"fa fa-bell fix_icon_bell\" style={{ fontSize: '40px', color: '#fff', backgroundColor: '#f84545' }}></i>\n                        </div>\n                        <h4 className=\"text-center p-3\" style={{ color: '#fff' }}>Vui Lòng Kiểm Tra Lại Giỏ Hàng!</h4>\n                    </div>\n                </div>\n            }\n\n            <div className=\"breadcrumb-area\">\n                <div className=\"container\">\n                    <div className=\"breadcrumb-content\">\n                        <ul>\n                            <li><Link to=\"/\">Home</Link></li>\n                            <li className=\"active\">Shopping Cart</li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n\n            <div className=\"Shopping-cart-area pt-60 pb-60\">\n                <div className=\"container\">\n                    <div className=\"row\">\n                        <div className=\"col-12\">\n                            <form action=\"#\">\n                                <div className=\"table-content table-responsive\">\n                                    <table className=\"table\">\n                                        <thead>\n                                            <tr>\n                                                <th className=\"li-product-remove\">remove</th>\n                                                <th className=\"li-product-thumbnail\">images</th>\n                                                <th className=\"cart-product-name\">Product</th>\n                                                <th className=\"li-product-price\">Price</th>\n                                                <th className=\"li-product-price\">Size</th>\n                                                <th className=\"li-product-quantity\">Quantity</th>\n                                                <th className=\"li-product-subtotal\">Total</th>\n                                            </tr>\n                                        </thead>\n                                        <tbody>\n                                            {\n                                                list_carts && list_carts.map((value, index) => (\n                                                    <tr key={index}>\n                                                        <td className=\"li-product-remove\" onClick={() => handler_delete_carts(value.id_cart)}>\n                                                            <a style={{ cursor: 'pointer' }}><i className=\"fa fa-times\"></i></a>\n                                                        </td>\n                                                        <td className=\"li-product-thumbnail\"><Link to={`/detail/${value.id_product}`}><img src={value.image} style={{ width: '5rem' }} alt=\"Li's Product Image\" /></Link></td>\n                                                        <td className=\"li-product-name\"><a href=\"#\">{value.name_product}</a></td>\n                                                        <td className=\"li-product-price\"><span className=\"amount\">{new Intl.NumberFormat('vi-VN',{style: 'decimal',decimal: 'VND'}).format(value.price_product)+ ' VNĐ'}</span></td>\n                                                        <td className=\"li-product-price\"><span className=\"amount\">{value.size}</span></td>\n                                                        <td className=\"quantity\">\n                                                            <label>Quantity</label>\n                                                            <div className=\"cart-plus-minus\">\n                                                                <input className=\"cart-plus-minus-box\" value={value.count} type=\"text\" />\n                                                                <div className=\"dec qtybutton\" onClick={() => downCount(value.count, value.id_cart)}><i className=\"fa fa-angle-down\"></i></div>\n                                                                <div className=\"inc qtybutton\" onClick={() => upCount(value.count, value.id_cart)}><i className=\"fa fa-angle-up\"></i></div>\n                                                            </div>\n                                                        </td>\n                                                        <td className=\"product-subtotal\"><span className=\"amount\">{new Intl.NumberFormat('vi-VN',{style: 'decimal',decimal: 'VND'}).format(parseInt(value.price_product) * parseInt(value.count))+ ' VNĐ'}</span></td>\n                                                    </tr>\n                                                ))\n                                            }\n                                        </tbody>\n                                    </table>\n                                </div>\n                                <div class=\"row\">\n                                    <div class=\"col-12\">\n                                        <div class=\"coupon-all\">\n                                            <div class=\"coupon\">\n                                                <input id=\"coupon_code\" class=\"input-text\" onChange={(e) => set_coupon(e.target.value)} value={coupon} placeholder=\"Coupon code\" type=\"text\" /> &nbsp;\n                                                <input class=\"button\" value=\"Apply coupon\" type=\"submit\" onClick={handlerCoupon} />\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div className=\"row\">\n                                    <div className=\"col-md-5 ml-auto\">\n                                        <div className=\"cart-page-total\">\n                                            <h2>Cart totals</h2>\n                                            <ul>\n                                                <li>Sub Total <span>{new Intl.NumberFormat('vi-VN',{style: 'decimal',decimal: 'VND'}).format(total_price) + ' VNĐ'}</span></li>\n                                                <li>Discount <span>{new Intl.NumberFormat('vi-VN',{style: 'decimal',decimal: 'VND'}).format(discount) + ' VNĐ'}</span></li>\n                                                <li>Total <span>{new Intl.NumberFormat('vi-VN',{style: 'decimal',decimal: 'VND'}).format(new_price) + ' VNĐ'}</span></li>\n                                            </ul>\n                                            <a style={{ color: '#fff', cursor: 'pointer', fontWeight: '600' }} onClick={handler_checkout}>Proceed to checkout</a>\n                                        </div>\n                                    </div>\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Cart;"]},"metadata":{},"sourceType":"module"}