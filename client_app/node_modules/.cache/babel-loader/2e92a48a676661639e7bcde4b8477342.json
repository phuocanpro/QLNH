{"ast":null,"code":"var _jsxFileName = \"D:\\\\class\\\\cnWeb\\\\QLNH\\\\client_app\\\\src\\\\Checkout\\\\MoMo.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport axios from 'axios';\nimport crypto from 'crypto';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nMoMo.propTypes = {\n  orderID: PropTypes.string,\n  total: PropTypes.number\n};\nMoMo.defaultProps = {\n  orderID: '',\n  total: 0\n};\n\nfunction MoMo(props) {\n  _s();\n\n  const [error, setError] = useState(false);\n  const {\n    orderID,\n    total\n  } = props;\n  console.log(orderID);\n  useEffect(() => {\n    const path = \"https://test-payment.momo.vn/gw_payment/transactionProcessor\";\n    const partnerCode = \"MOMOHMXO20210608\";\n    const accessKey = \"XPBbArMut5PxmWiY\";\n    const serectkey = \"uLb683H8g9dWuiyipZbLHgO6zjSDlVm5\";\n    const orderInfo = \"Thanh toán MoMo\";\n    const notifyurl = \"http://localhost:8000/api/Payment/momo\";\n    const returnUrl = \"http://localhost:3000/momo\";\n    const amount = total.toString();\n    const orderId = orderID;\n    const requestType = \"captureMoMoWallet\";\n    const extraData = \"merchantName=Payment\";\n    const rawSignature = `partnerCode=${partnerCode}&accessKey=${accessKey}&requestId=${orderId}&amount=${amount}&orderId=${orderId}&orderInfo=${orderInfo}&returnUrl=${returnUrl}&notifyUrl=${notifyurl}&extraData=${extraData}`;\n    var signature = crypto.createHmac('sha256', serectkey).update(rawSignature).digest('hex');\n    var body = JSON.stringify({\n      partnerCode: partnerCode,\n      accessKey: accessKey,\n      requestId: orderId,\n      amount: amount,\n      orderId: orderId,\n      orderInfo: orderInfo,\n      returnUrl: returnUrl,\n      notifyUrl: notifyurl,\n      extraData: extraData,\n      requestType: requestType,\n      signature: signature\n    });\n    axios.post(path, body).then(response => {\n      if (response.data.errorCode !== 0) {\n        setError(true);\n        setTimeout(() => {\n          setError(false);\n        }, 1500);\n      } else {\n        window.location.href = response.data.payUrl;\n      }\n    }).catch(error => {\n      console.error('There was an error!', error);\n    });\n  }, [orderID]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal_success\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"group_model_success pt-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center p-2\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-bell fix_icon_bell\",\n            style: {\n              fontSize: '40px',\n              color: '#fff',\n              backgroundColor: '#f84545'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-center p-3\",\n          style: {\n            color: '#fff'\n          },\n          children: \"L\\u1ED7i thanh to\\xE1n!!!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 9\n  }, this);\n}\n\n_s(MoMo, \"81Vxn8UbQaNZ3gmrqNNQnaEoNrE=\");\n\n_c = MoMo;\nexport default MoMo;\n\nvar _c;\n\n$RefreshReg$(_c, \"MoMo\");","map":{"version":3,"sources":["D:/class/cnWeb/QLNH/client_app/src/Checkout/MoMo.jsx"],"names":["React","useEffect","useState","PropTypes","axios","crypto","MoMo","propTypes","orderID","string","total","number","defaultProps","props","error","setError","console","log","path","partnerCode","accessKey","serectkey","orderInfo","notifyurl","returnUrl","amount","toString","orderId","requestType","extraData","rawSignature","signature","createHmac","update","digest","body","JSON","stringify","requestId","notifyUrl","post","then","response","data","errorCode","setTimeout","window","location","href","payUrl","catch","fontSize","color","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport axios from 'axios';\r\nimport crypto from 'crypto'\r\n\r\n\r\nMoMo.propTypes = {\r\n    orderID: PropTypes.string,\r\n    total: PropTypes.number,\r\n}\r\n\r\nMoMo.defaultProps = {\r\n    orderID: '',\r\n    total: 0,\r\n}\r\n\r\n\r\nfunction MoMo(props) {\r\n\r\n    const [error, setError] = useState(false)\r\n\r\n    const { orderID, total } = props\r\n\r\n    console.log(orderID)\r\n\r\n    useEffect(() => {\r\n        const path = \"https://test-payment.momo.vn/gw_payment/transactionProcessor\"\r\n        const partnerCode = \"MOMOHMXO20210608\"\r\n        const accessKey = \"XPBbArMut5PxmWiY\"\r\n        const serectkey = \"uLb683H8g9dWuiyipZbLHgO6zjSDlVm5\"\r\n        const orderInfo = \"Thanh toán MoMo\"\r\n        const notifyurl = \"http://localhost:8000/api/Payment/momo\"\r\n        const returnUrl = \"http://localhost:3000/momo\"\r\n        const amount = total.toString()\r\n        const orderId = orderID\r\n        const requestType = \"captureMoMoWallet\"\r\n        const extraData = \"merchantName=Payment\"\r\n        const rawSignature = `partnerCode=${partnerCode}&accessKey=${accessKey}&requestId=${orderId}&amount=${amount}&orderId=${orderId}&orderInfo=${orderInfo}&returnUrl=${returnUrl}&notifyUrl=${notifyurl}&extraData=${extraData}`\r\n\r\n        var signature = crypto.createHmac('sha256', serectkey)\r\n            .update(rawSignature)\r\n            .digest('hex');\r\n\r\n        var body = JSON.stringify({\r\n            partnerCode: partnerCode,\r\n            accessKey: accessKey,\r\n            requestId: orderId,\r\n            amount: amount,\r\n            orderId: orderId,\r\n            orderInfo: orderInfo,\r\n            returnUrl: returnUrl,\r\n            notifyUrl: notifyurl,\r\n            extraData: extraData,\r\n            requestType: requestType,\r\n            signature: signature\r\n        })\r\n\r\n        axios.post(path, body)\r\n            .then((response) => {\r\n                if (response.data.errorCode !== 0) {\r\n                    setError(true)\r\n                    setTimeout(() => {\r\n                        setError(false)\r\n                    }, 1500)\r\n                } else {\r\n\r\n                    window.location.href = response.data.payUrl\r\n\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.error('There was an error!', error);\r\n            })\r\n    }, [orderID])\r\n\r\n    return (\r\n        <div>\r\n            {\r\n                error &&\r\n                <div className=\"modal_success\">\r\n                    <div className=\"group_model_success pt-3\">\r\n                        <div className=\"text-center p-2\">\r\n                            <i className=\"fa fa-bell fix_icon_bell\" style={{ fontSize: '40px', color: '#fff', backgroundColor: '#f84545' }}></i>\r\n                        </div>\r\n                        <h4 className=\"text-center p-3\" style={{ color: '#fff' }}>Lỗi thanh toán!!!</h4>\r\n                    </div>\r\n                </div>\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MoMo;"]},"metadata":{},"sourceType":"module"}