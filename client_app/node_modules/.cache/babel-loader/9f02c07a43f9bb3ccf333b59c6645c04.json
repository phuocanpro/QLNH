{"ast":null,"code":"var _jsxFileName = \"D:\\\\CNWEB\\\\QLNH\\\\client_app\\\\src\\\\AdminPage\\\\AdminUser.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { Button, Form, message } from \"antd\";\nimport TableComponent from \"./TableComponent\";\nimport { DeleteOutlined, EditOutlined, SearchOutlined } from \"@ant-design/icons\";\nimport ModalComponent from \"./ModalComponent\";\nimport InputComponent from \"./InputComponent\";\nimport DrawerComponent from \"./DrawerComponent\";\nimport { WrapperHeader } from \"./style\";\nimport User from \"../API/User\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AdminUser = () => {\n  _s();\n\n  const [isOpenDrawer, setIsOpenDrawer] = useState(false);\n  const [rowSelected, setRowSelected] = useState(\"\");\n  const [isModalOpenDelete, setIsModalOpenDelete] = useState(false);\n  const [users, setUsers] = useState([]);\n  const user = User.Get_User(sessionStorage.getItem(\"id_user\"));\n  console.log(\"user\", user);\n  const [stateUserDetails, setStateUserDetails] = useState({\n    userName: \"\",\n    email: \"\",\n    password: \"\",\n    isAdmin: \"\",\n    phone: \"\",\n    address: \"\"\n  });\n  const [form] = Form.useForm();\n\n  const getAllUsers = async () => {\n    const res = User.Get_All_User();\n    return res;\n  };\n\n  useEffect(() => {\n    console.log(\"useEffect is running\");\n\n    const fetchData = async () => {\n      try {\n        const usersData = await getAllUsers();\n        setUsers(Array.from(usersData));\n      } catch (error) {\n        // Handle error\n        console.log(\"err\", error);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  const onUpdateUser = () => {\n    mutationUpdate.mutate({\n      id: rowSelected,\n      ...stateUserDetails\n    } //   {\n    //     onSettled: () => {\n    //       queryUser.refetch();\n    //     },\n    //   }\n    );\n  }; //   const mutationDelete = useMutationHooks(async (data) => {\n  //     const { id, token } = data;\n  //     const res = await UserService.deleteUser(id, token);\n  //     return res;\n  //   });\n\n\n  const mutationUpdate = async data => {\n    const {\n      id,\n      ...rests\n    } = data;\n    const res = await User.Put_User(id, { ...rests\n    });\n    return res;\n  }; //   const mutationDeleteMany = useMutationHooks(async (data) => {\n  //     const { token, ...ids } = data;\n  //     const res = await UserService.deleteManyUser(ids, token);\n  //     return res;\n  //   });\n  //   const handleDeleteManyUsers = (ids) => {\n  //     mutationDeleteMany.mutate(\n  //       { ids: ids, token: user?.access_token },\n  //       {\n  //         onSettled: () => {\n  //           queryUser.refetch();\n  //         },\n  //       }\n  //     );\n  //   };\n  //   const {\n  //     data: dataDeleted,\n  //     isLoading: isLoadingDeleted,\n  //     isSuccess: isSuccessDeleted,\n  //     isError: isErrorDeleted,\n  //   } = mutationDelete;\n  //   const {\n  //     data: dataDeletedMany,\n  //     isLoading: isLoadingDeletedMany,\n  //     isSuccess: isSuccessDeletedMany,\n  //     isError: isErrorDeletedMany,\n  //   } = mutationDeleteMany;\n\n\n  const {\n    data: dataUpdated,\n    isLoading: isLoadingUpdated,\n    isSuccess: isSuccessUpdated,\n    isError: isErrorUpdated\n  } = mutationUpdate;\n  const [userDetails, setUserDetails] = useState({});\n\n  const fetchGetDetailsUser = async () => {\n    const data = User.Get_User(rowSelected);\n    setUserDetails(data);\n    setStateUserDetails({\n      userName: userDetails === null || userDetails === void 0 ? void 0 : userDetails.name,\n      email: userDetails === null || userDetails === void 0 ? void 0 : userDetails.email,\n      password: userDetails === null || userDetails === void 0 ? void 0 : userDetails.password,\n      isAdmin: userDetails === null || userDetails === void 0 ? void 0 : userDetails.role,\n      phone: userDetails === null || userDetails === void 0 ? void 0 : userDetails.phone,\n      address: userDetails === null || userDetails === void 0 ? void 0 : userDetails.address\n    });\n    console.log(\"stateUserDetails\", userDetails === null || userDetails === void 0 ? void 0 : userDetails.name); // setIsLoadingUpdate(false);\n  };\n\n  useEffect(() => {\n    form.setFieldsValue(stateUserDetails);\n  }, [form, stateUserDetails]);\n  useEffect(() => {\n    if (rowSelected && isOpenDrawer) {\n      //   setIsLoadingUpdate(true);\n      fetchGetDetailsUser(rowSelected);\n    } // setIsOpenDrawer(true);\n\n  }, [rowSelected, isOpenDrawer]);\n\n  const renderAction = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(DeleteOutlined, {\n        style: {\n          color: \"red\",\n          fontSize: \"30px\",\n          cursor: \"pointer\"\n        },\n        onClick: () => setIsModalOpenDelete(true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(EditOutlined, {\n        style: {\n          color: \"orange\",\n          fontSize: \"30px\",\n          cursor: \"pointer\"\n        },\n        onClick: handleDetailsUsers\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this);\n  };\n\n  const [searchText, setSearchText] = useState(\"\");\n  const [searchedColumn, setSearchedColumn] = useState(\"\");\n  const searchInput = useRef(null);\n\n  const handleSearch = (selectedKeys, confirm, dataIndex) => {\n    confirm();\n    setSearchText(selectedKeys[0]);\n    setSearchedColumn(dataIndex);\n  };\n\n  const handleReset = clearFilters => {\n    clearFilters();\n    setSearchText(\"\");\n  };\n\n  const getColumnSearchProps = dataIndex => ({\n    filterDropdown: ({\n      setSelectedKeys,\n      selectedKeys,\n      confirm,\n      clearFilters\n    }) => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: 8\n      },\n      onKeyDown: e => e.stopPropagation(),\n      children: [/*#__PURE__*/_jsxDEV(InputComponent, {\n        ref: searchInput,\n        placeholder: `Search ${dataIndex}`,\n        value: selectedKeys[0],\n        onChange: e => setSelectedKeys(e.target.value ? [e.target.value] : []),\n        onPressEnter: () => handleSearch(selectedKeys, confirm, dataIndex),\n        style: {\n          marginBottom: 8,\n          display: \"block\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        onClick: () => handleSearch(selectedKeys, confirm, dataIndex),\n        icon: /*#__PURE__*/_jsxDEV(SearchOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 17\n        }, this),\n        size: \"small\",\n        style: {\n          width: 90\n        },\n        children: \"Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => clearFilters && handleReset(clearFilters),\n        size: \"small\",\n        style: {\n          width: 90\n        },\n        children: \"Reset\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this),\n    filterIcon: filtered => /*#__PURE__*/_jsxDEV(SearchOutlined, {\n      style: {\n        color: filtered ? \"#1890ff\" : undefined\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 7\n    }, this),\n    onFilter: (value, record) => record[dataIndex].toString().toLowerCase().includes(value.toLowerCase()),\n    onFilterDropdownOpenChange: visible => {\n      if (visible) {\n        setTimeout(() => {\n          var _searchInput$current;\n\n          return (_searchInput$current = searchInput.current) === null || _searchInput$current === void 0 ? void 0 : _searchInput$current.select();\n        }, 100);\n      }\n    }\n  });\n\n  const columns = [{\n    title: \"Name\",\n    dataIndex: \"name\",\n    sorter: (a, b) => a.name.length - b.name.length,\n    ...getColumnSearchProps(\"name\")\n  }, {\n    title: \"Email\",\n    dataIndex: \"email\",\n    sorter: (a, b) => a.email - b.email,\n    ...getColumnSearchProps(\"email\")\n  }, {\n    title: \"Admin\",\n    dataIndex: \"isAdmin\",\n    filters: [{\n      text: \"True\",\n      value: true\n    }, {\n      text: \"False\",\n      value: false\n    }]\n  }, {\n    title: \"Phone\",\n    dataIndex: \"phone\",\n    sorter: (a, b) => a.phone - b.phone,\n    ...getColumnSearchProps(\"phone\")\n  }, {\n    title: \"Address\",\n    dataIndex: \"address\"\n  }, {\n    title: \"Action\",\n    dataIndex: \"action\",\n    render: renderAction\n  }];\n  const dataTable = Array.isArray(users) ? users === null || users === void 0 ? void 0 : users.map(user => {\n    return { ...user,\n      userName: user.name,\n      key: user.id,\n      isAdmin: user.role === \"admin\" ? \"TRUE\" : \"FALSE\"\n    };\n  }) : [];\n\n  const handleCloseDrawer = () => {\n    setIsOpenDrawer(false);\n    setStateUserDetails({\n      userName: \"\",\n      email: \"\",\n      password: \"\",\n      isAdmin: \"\",\n      phone: \"\",\n      address: \"\"\n    });\n    form.resetFields();\n  };\n\n  useEffect(() => {\n    if (isSuccessUpdated && (dataUpdated === null || dataUpdated === void 0 ? void 0 : dataUpdated.status) === \"OK\") {\n      message.success();\n      handleCloseDrawer();\n    } else if (isErrorUpdated) {\n      message.error();\n    }\n  }, [isSuccessUpdated, isErrorUpdated]); //   useEffect(() => {\n  //     if (isSuccessDeleted && dataDeleted?.status === \"OK\") {\n  //       message.success();\n  //       handleCancelDelete();\n  //     } else if (isErrorDeleted) {\n  //       message.error();\n  //     }\n  //   }, [isSuccessDeleted, isErrorDeleted]);\n  //   useEffect(() => {\n  //     if (isSuccessDeletedMany && dataDeletedMany?.status === \"OK\") {\n  //       message.success();\n  //     } else if (isErrorDeletedMany) {\n  //       message.error();\n  //     }\n  //   }, [isSuccessDeletedMany, isErrorDeletedMany]);\n\n  const handleDetailsUsers = () => {\n    setIsOpenDrawer(true);\n  };\n\n  const handleCancelDelete = () => {\n    setIsModalOpenDelete(false);\n  }; //   const handleDeleteUser = () => {\n  //     mutationDelete.mutate(\n  //       { id: rowSelected, token: user?.access_token },\n  //       {\n  //         onSettled: () => {\n  //           queryUser.refetch();\n  //         },\n  //       }\n  //     );\n  //   };\n\n\n  const handleOnchangeDetails = e => {\n    setStateUserDetails({ ...stateUserDetails,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      marginTop: \"10px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(WrapperHeader, {\n      children: \"Manager Users\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: \"20px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(TableComponent //   handleDeleteMany={handleDeleteManyUsers}\n      , {\n        columns: columns,\n        data: dataTable,\n        onRow: (record, rowIndex) => {\n          return {\n            onClick: event => {\n              setRowSelected(record.id);\n            }\n          };\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DrawerComponent, {\n      title: \"Details User\",\n      isOpen: isOpenDrawer,\n      onClose: () => setIsOpenDrawer(false),\n      width: \"90%\",\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        name: \"basic\",\n        labelCol: {\n          span: 6\n        },\n        wrapperCol: {\n          span: 18\n        },\n        style: {\n          maxWidth: 600\n        },\n        initialValues: {\n          remember: true\n        },\n        onFinish: onUpdateUser,\n        autoComplete: \"on\",\n        form: form,\n        children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"UserName\",\n          name: \"userName\",\n          rules: [{\n            required: true,\n            message: \"Please input userName!\"\n          }],\n          children: /*#__PURE__*/_jsxDEV(InputComponent, {\n            value: stateUserDetails.userName,\n            onChange: handleOnchangeDetails,\n            name: \"userName\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"Email\",\n          name: \"email\",\n          rules: [{\n            required: true,\n            message: \"Please input email!\"\n          }],\n          children: /*#__PURE__*/_jsxDEV(InputComponent, {\n            value: stateUserDetails.email,\n            onChange: handleOnchangeDetails,\n            name: \"email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"Password\",\n          name: \"password\",\n          rules: [{\n            required: true,\n            message: \"Please input password!\"\n          }],\n          children: /*#__PURE__*/_jsxDEV(InputComponent, {\n            value: stateUserDetails.password,\n            onChange: handleOnchangeDetails,\n            name: \"password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"Admin\",\n          name: \"isAdmin\",\n          rules: [{\n            required: true,\n            message: \"Please input isAdmin!\"\n          }],\n          children: /*#__PURE__*/_jsxDEV(InputComponent, {\n            value: stateUserDetails.isAdmin,\n            onChange: handleOnchangeDetails,\n            name: \"isAdmin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"Phone\",\n          name: \"phone\",\n          rules: [{\n            required: true,\n            message: \"Please input phone!\"\n          }],\n          children: /*#__PURE__*/_jsxDEV(InputComponent, {\n            value: stateUserDetails.phone,\n            onChange: handleOnchangeDetails,\n            name: \"phone\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"Address\",\n          name: \"address\",\n          rules: [{\n            required: true,\n            message: \"Please input address!\"\n          }],\n          children: /*#__PURE__*/_jsxDEV(InputComponent, {\n            value: stateUserDetails.address,\n            onChange: handleOnchangeDetails,\n            name: \"address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"Avatar\",\n          name: \"avatar\",\n          rules: [{\n            required: true,\n            message: \"Please input avatar!\"\n          }]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          wrapperCol: {\n            offset: 20,\n            span: 16\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            type: \"primary\",\n            htmlType: \"submit\",\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ModalComponent, {\n      title: \"Delete User\",\n      open: isModalOpenDelete,\n      onCancel: handleCancelDelete // onOk={handleDeleteUser}\n      ,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Are you sure delete this user?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 467,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 355,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AdminUser, \"zIxO8gE1FbDjzBtM8USaYjHf3IU=\", false, function () {\n  return [Form.useForm];\n});\n\n_c = AdminUser;\nexport default AdminUser;\n\nvar _c;\n\n$RefreshReg$(_c, \"AdminUser\");","map":{"version":3,"sources":["D:/CNWEB/QLNH/client_app/src/AdminPage/AdminUser.jsx"],"names":["React","useEffect","useRef","useState","Button","Form","message","TableComponent","DeleteOutlined","EditOutlined","SearchOutlined","ModalComponent","InputComponent","DrawerComponent","WrapperHeader","User","AdminUser","isOpenDrawer","setIsOpenDrawer","rowSelected","setRowSelected","isModalOpenDelete","setIsModalOpenDelete","users","setUsers","user","Get_User","sessionStorage","getItem","console","log","stateUserDetails","setStateUserDetails","userName","email","password","isAdmin","phone","address","form","useForm","getAllUsers","res","Get_All_User","fetchData","usersData","Array","from","error","onUpdateUser","mutationUpdate","mutate","id","data","rests","Put_User","dataUpdated","isLoading","isLoadingUpdated","isSuccess","isSuccessUpdated","isError","isErrorUpdated","userDetails","setUserDetails","fetchGetDetailsUser","name","role","setFieldsValue","renderAction","color","fontSize","cursor","handleDetailsUsers","searchText","setSearchText","searchedColumn","setSearchedColumn","searchInput","handleSearch","selectedKeys","confirm","dataIndex","handleReset","clearFilters","getColumnSearchProps","filterDropdown","setSelectedKeys","padding","e","stopPropagation","target","value","marginBottom","display","width","filterIcon","filtered","undefined","onFilter","record","toString","toLowerCase","includes","onFilterDropdownOpenChange","visible","setTimeout","current","select","columns","title","sorter","a","b","length","filters","text","render","dataTable","isArray","map","key","handleCloseDrawer","resetFields","status","success","handleCancelDelete","handleOnchangeDetails","marginTop","rowIndex","onClick","event","span","maxWidth","remember","required","offset"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { Button, Form, message } from \"antd\";\nimport TableComponent from \"./TableComponent\";\nimport {\n  DeleteOutlined,\n  EditOutlined,\n  SearchOutlined,\n} from \"@ant-design/icons\";\nimport ModalComponent from \"./ModalComponent\";\nimport InputComponent from \"./InputComponent\";\nimport DrawerComponent from \"./DrawerComponent\";\nimport { WrapperHeader } from \"./style\";\nimport User from \"../API/User\";\n\nconst AdminUser = () => {\n  const [isOpenDrawer, setIsOpenDrawer] = useState(false);\n  const [rowSelected, setRowSelected] = useState(\"\");\n  const [isModalOpenDelete, setIsModalOpenDelete] = useState(false);\n\n  const [users, setUsers] = useState([]);\n  const user = User.Get_User(sessionStorage.getItem(\"id_user\"));\n  console.log(\"user\", user);\n\n  const [stateUserDetails, setStateUserDetails] = useState({\n    userName: \"\",\n    email: \"\",\n    password: \"\",\n    isAdmin: \"\",\n    phone: \"\",\n    address: \"\",\n  });\n\n  const [form] = Form.useForm();\n\n  const getAllUsers = async () => {\n    const res = User.Get_All_User();\n    return res;\n  };\n\n  useEffect(() => {\n    console.log(\"useEffect is running\");\n    const fetchData = async () => {\n      try {\n        const usersData = await getAllUsers();\n        setUsers(Array.from(usersData));\n      } catch (error) {\n        // Handle error\n        console.log(\"err\", error);\n      }\n    };\n    fetchData();\n  }, []);\n\n  const onUpdateUser = () => {\n    mutationUpdate.mutate(\n      {\n        id: rowSelected,\n        ...stateUserDetails,\n      }\n      //   {\n      //     onSettled: () => {\n      //       queryUser.refetch();\n      //     },\n      //   }\n    );\n  };\n\n  //   const mutationDelete = useMutationHooks(async (data) => {\n  //     const { id, token } = data;\n  //     const res = await UserService.deleteUser(id, token);\n  //     return res;\n  //   });\n\n  const mutationUpdate = async (data) => {\n    const { id, ...rests } = data;\n    const res = await User.Put_User(id, { ...rests });\n    return res;\n  };\n\n  //   const mutationDeleteMany = useMutationHooks(async (data) => {\n  //     const { token, ...ids } = data;\n  //     const res = await UserService.deleteManyUser(ids, token);\n  //     return res;\n  //   });\n  //   const handleDeleteManyUsers = (ids) => {\n  //     mutationDeleteMany.mutate(\n  //       { ids: ids, token: user?.access_token },\n  //       {\n  //         onSettled: () => {\n  //           queryUser.refetch();\n  //         },\n  //       }\n  //     );\n  //   };\n  //   const {\n  //     data: dataDeleted,\n  //     isLoading: isLoadingDeleted,\n  //     isSuccess: isSuccessDeleted,\n  //     isError: isErrorDeleted,\n  //   } = mutationDelete;\n\n  //   const {\n  //     data: dataDeletedMany,\n  //     isLoading: isLoadingDeletedMany,\n  //     isSuccess: isSuccessDeletedMany,\n  //     isError: isErrorDeletedMany,\n  //   } = mutationDeleteMany;\n\n  const {\n    data: dataUpdated,\n    isLoading: isLoadingUpdated,\n    isSuccess: isSuccessUpdated,\n    isError: isErrorUpdated,\n  } = mutationUpdate;\n\n  const [userDetails, setUserDetails] = useState({});\n  const fetchGetDetailsUser = async () => {\n    const data = User.Get_User(rowSelected);\n    setUserDetails(data);\n    setStateUserDetails({\n      userName: userDetails?.name,\n      email: userDetails?.email,\n      password: userDetails?.password,\n      isAdmin: userDetails?.role,\n      phone: userDetails?.phone,\n      address: userDetails?.address,\n    });\n    console.log(\"stateUserDetails\", userDetails?.name);\n    // setIsLoadingUpdate(false);\n  };\n  useEffect(() => {\n    form.setFieldsValue(stateUserDetails);\n  }, [form, stateUserDetails]);\n\n  useEffect(() => {\n    if (rowSelected && isOpenDrawer) {\n      //   setIsLoadingUpdate(true);\n      fetchGetDetailsUser(rowSelected);\n    }\n    // setIsOpenDrawer(true);\n  }, [rowSelected, isOpenDrawer]);\n\n  const renderAction = () => {\n    return (\n      <div>\n        <DeleteOutlined\n          style={{ color: \"red\", fontSize: \"30px\", cursor: \"pointer\" }}\n          onClick={() => setIsModalOpenDelete(true)}\n        />\n        <EditOutlined\n          style={{ color: \"orange\", fontSize: \"30px\", cursor: \"pointer\" }}\n          onClick={handleDetailsUsers}\n        />\n      </div>\n    );\n  };\n\n  const [searchText, setSearchText] = useState(\"\");\n  const [searchedColumn, setSearchedColumn] = useState(\"\");\n  const searchInput = useRef(null);\n\n  const handleSearch = (selectedKeys, confirm, dataIndex) => {\n    confirm();\n    setSearchText(selectedKeys[0]);\n    setSearchedColumn(dataIndex);\n  };\n\n  const handleReset = (clearFilters) => {\n    clearFilters();\n    setSearchText(\"\");\n  };\n\n  const getColumnSearchProps = (dataIndex) => ({\n    filterDropdown: ({\n      setSelectedKeys,\n      selectedKeys,\n      confirm,\n      clearFilters,\n    }) => (\n      <div\n        style={{\n          padding: 8,\n        }}\n        onKeyDown={(e) => e.stopPropagation()}\n      >\n        <InputComponent\n          ref={searchInput}\n          placeholder={`Search ${dataIndex}`}\n          value={selectedKeys[0]}\n          onChange={(e) =>\n            setSelectedKeys(e.target.value ? [e.target.value] : [])\n          }\n          onPressEnter={() => handleSearch(selectedKeys, confirm, dataIndex)}\n          style={{\n            marginBottom: 8,\n            display: \"block\",\n          }}\n        />\n\n        <Button\n          type=\"primary\"\n          onClick={() => handleSearch(selectedKeys, confirm, dataIndex)}\n          icon={<SearchOutlined />}\n          size=\"small\"\n          style={{\n            width: 90,\n          }}\n        >\n          Search\n        </Button>\n        <Button\n          onClick={() => clearFilters && handleReset(clearFilters)}\n          size=\"small\"\n          style={{\n            width: 90,\n          }}\n        >\n          Reset\n        </Button>\n      </div>\n    ),\n    filterIcon: (filtered) => (\n      <SearchOutlined\n        style={{\n          color: filtered ? \"#1890ff\" : undefined,\n        }}\n      />\n    ),\n    onFilter: (value, record) =>\n      record[dataIndex].toString().toLowerCase().includes(value.toLowerCase()),\n    onFilterDropdownOpenChange: (visible) => {\n      if (visible) {\n        setTimeout(() => searchInput.current?.select(), 100);\n      }\n    },\n  });\n\n  const columns = [\n    {\n      title: \"Name\",\n      dataIndex: \"name\",\n      sorter: (a, b) => a.name.length - b.name.length,\n      ...getColumnSearchProps(\"name\"),\n    },\n    {\n      title: \"Email\",\n      dataIndex: \"email\",\n      sorter: (a, b) => a.email - b.email,\n      ...getColumnSearchProps(\"email\"),\n    },\n    {\n      title: \"Admin\",\n      dataIndex: \"isAdmin\",\n      filters: [\n        {\n          text: \"True\",\n          value: true,\n        },\n        {\n          text: \"False\",\n          value: false,\n        },\n      ],\n    },\n    {\n      title: \"Phone\",\n      dataIndex: \"phone\",\n      sorter: (a, b) => a.phone - b.phone,\n      ...getColumnSearchProps(\"phone\"),\n    },\n    {\n      title: \"Address\",\n      dataIndex: \"address\",\n    },\n    {\n      title: \"Action\",\n      dataIndex: \"action\",\n      render: renderAction,\n    },\n  ];\n  const dataTable = Array.isArray(users)\n    ? users?.map((user) => {\n        return {\n          ...user,\n          userName: user.name,\n          key: user.id,\n          isAdmin: user.role === \"admin\" ? \"TRUE\" : \"FALSE\",\n        };\n      })\n    : [];\n\n  const handleCloseDrawer = () => {\n    setIsOpenDrawer(false);\n    setStateUserDetails({\n      userName: \"\",\n      email: \"\",\n      password: \"\",\n      isAdmin: \"\",\n      phone: \"\",\n      address: \"\",\n    });\n    form.resetFields();\n  };\n\n  useEffect(() => {\n    if (isSuccessUpdated && dataUpdated?.status === \"OK\") {\n      message.success();\n      handleCloseDrawer();\n    } else if (isErrorUpdated) {\n      message.error();\n    }\n  }, [isSuccessUpdated, isErrorUpdated]);\n\n  //   useEffect(() => {\n  //     if (isSuccessDeleted && dataDeleted?.status === \"OK\") {\n  //       message.success();\n  //       handleCancelDelete();\n  //     } else if (isErrorDeleted) {\n  //       message.error();\n  //     }\n  //   }, [isSuccessDeleted, isErrorDeleted]);\n\n  //   useEffect(() => {\n  //     if (isSuccessDeletedMany && dataDeletedMany?.status === \"OK\") {\n  //       message.success();\n  //     } else if (isErrorDeletedMany) {\n  //       message.error();\n  //     }\n  //   }, [isSuccessDeletedMany, isErrorDeletedMany]);\n  const handleDetailsUsers = () => {\n    setIsOpenDrawer(true);\n  };\n  const handleCancelDelete = () => {\n    setIsModalOpenDelete(false);\n  };\n\n  //   const handleDeleteUser = () => {\n  //     mutationDelete.mutate(\n  //       { id: rowSelected, token: user?.access_token },\n  //       {\n  //         onSettled: () => {\n  //           queryUser.refetch();\n  //         },\n  //       }\n  //     );\n  //   };\n\n  const handleOnchangeDetails = (e) => {\n    setStateUserDetails({\n      ...stateUserDetails,\n      [e.target.name]: e.target.value,\n    });\n  };\n  return (\n    <div style={{ marginTop: \"10px\" }}>\n      <WrapperHeader>Manager Users</WrapperHeader>\n      <div style={{ marginTop: \"20px\" }}>\n        <TableComponent\n          //   handleDeleteMany={handleDeleteManyUsers}\n          columns={columns}\n          data={dataTable}\n          onRow={(record, rowIndex) => {\n            return {\n              onClick: (event) => {\n                setRowSelected(record.id);\n              },\n            };\n          }}\n        />\n      </div>\n      <DrawerComponent\n        title=\"Details User\"\n        isOpen={isOpenDrawer}\n        onClose={() => setIsOpenDrawer(false)}\n        width=\"90%\"\n      >\n        <Form\n          name=\"basic\"\n          labelCol={{ span: 6 }}\n          wrapperCol={{ span: 18 }}\n          style={{ maxWidth: 600 }}\n          initialValues={{ remember: true }}\n          onFinish={onUpdateUser}\n          autoComplete=\"on\"\n          form={form}\n        >\n          <Form.Item\n            label=\"UserName\"\n            name=\"userName\"\n            rules={[{ required: true, message: \"Please input userName!\" }]}\n          >\n            <InputComponent\n              value={stateUserDetails.userName}\n              onChange={handleOnchangeDetails}\n              name=\"userName\"\n            />\n          </Form.Item>\n\n          <Form.Item\n            label=\"Email\"\n            name=\"email\"\n            rules={[{ required: true, message: \"Please input email!\" }]}\n          >\n            <InputComponent\n              value={stateUserDetails.email}\n              onChange={handleOnchangeDetails}\n              name=\"email\"\n            />\n          </Form.Item>\n          <Form.Item\n            label=\"Password\"\n            name=\"password\"\n            rules={[{ required: true, message: \"Please input password!\" }]}\n          >\n            <InputComponent\n              value={stateUserDetails.password}\n              onChange={handleOnchangeDetails}\n              name=\"password\"\n            />\n          </Form.Item>\n          <Form.Item\n            label=\"Admin\"\n            name=\"isAdmin\"\n            rules={[{ required: true, message: \"Please input isAdmin!\" }]}\n          >\n            <InputComponent\n              value={stateUserDetails.isAdmin}\n              onChange={handleOnchangeDetails}\n              name=\"isAdmin\"\n            />\n          </Form.Item>\n          <Form.Item\n            label=\"Phone\"\n            name=\"phone\"\n            rules={[{ required: true, message: \"Please input phone!\" }]}\n          >\n            <InputComponent\n              value={stateUserDetails.phone}\n              onChange={handleOnchangeDetails}\n              name=\"phone\"\n            />\n          </Form.Item>\n          <Form.Item\n            label=\"Address\"\n            name=\"address\"\n            rules={[{ required: true, message: \"Please input address!\" }]}\n          >\n            <InputComponent\n              value={stateUserDetails.address}\n              onChange={handleOnchangeDetails}\n              name=\"address\"\n            />\n          </Form.Item>\n\n          <Form.Item\n            label=\"Avatar\"\n            name=\"avatar\"\n            rules={[{ required: true, message: \"Please input avatar!\" }]}\n          ></Form.Item>\n          <Form.Item wrapperCol={{ offset: 20, span: 16 }}>\n            <Button type=\"primary\" htmlType=\"submit\">\n              Submit\n            </Button>\n          </Form.Item>\n        </Form>\n      </DrawerComponent>\n      <ModalComponent\n        title=\"Delete User\"\n        open={isModalOpenDelete}\n        onCancel={handleCancelDelete}\n        // onOk={handleDeleteUser}\n      >\n        <div>Are you sure delete this user?</div>\n      </ModalComponent>\n    </div>\n  );\n};\nexport default AdminUser;\n"]},"metadata":{},"sourceType":"module"}